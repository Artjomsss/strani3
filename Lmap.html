<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∏–∫—Å–µ–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ –ï–≤—Ä–æ–ø—ã</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0c0c1a, #1a1a2e);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.25), rgba(39, 174, 96, 0.2));
            border-radius: 20px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.15);
        }

        h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #3498db, #2ecc71, #9b59b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 30px;
            align-items: start;
        }

        .map-container {
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .pixel-map {
            display: grid;
            grid-template-columns: repeat(60, 20px);
            grid-template-rows: repeat(40, 20px);
            gap: 1px;
            background: #2a2a40;
            padding: 20px;
            border-radius: 15px;
            border: 3px solid #3a3a5a;
            position: relative;
            margin: 0 auto;
            max-width: fit-content;
        }

        .pixel {
            width: 20px;
            height: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            border: 1px solid rgba(0,0,0,0.3);
            user-select: none;
        }

        .pixel:hover {
            transform: scale(1.2);
            z-index: 10;
            box-shadow: 0 0 0 2px #f39c12, 0 0 15px rgba(243, 156, 18, 0.5);
        }

        .pixel.empty {
            background: transparent;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .country-border {
            position: absolute;
            background: rgba(0,0,0,0.9);
            z-index: 5;
            pointer-events: none;
        }

        .border-top { top: -1px; left: 0; width: 100%; height: 1px; }
        .border-right { top: 0; right: -1px; width: 1px; height: 100%; }
        .border-bottom { bottom: -1px; left: 0; width: 100%; height: 1px; }
        .border-left { top: 0; left: -1px; width: 1px; height: 100%; }

        .controls {
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .control-group {
            margin-bottom: 25px;
        }

        h2 {
            color: #3498db;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        h3 {
            color: #2ecc71;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .legend {
            display: grid;
            grid-template-columns: 20px 1fr;
            gap: 10px;
            align-items: center;
            margin-bottom: 8px;
        }

        .color-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .status-info {
            background: rgba(52, 152, 219, 0.15);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #3498db;
        }

        .region-details {
            background: rgba(39, 174, 96, 0.15);
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            border-left: 4px solid #27ae60;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 5px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .detail-label {
            font-weight: bold;
            color: #bdc3c7;
        }

        .detail-value {
            color: #ecf0f1;
            font-weight: 500;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .stat-item {
            background: rgba(255,255,255,0.08);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.4em;
            font-weight: bold;
            color: #3498db;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            color: #bdc3c7;
        }

        .country-name {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 5px;
            color: #3498db;
        }

        .coordinates {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 10px;
        }

        .back-btn {
            background: linear-gradient(145deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            text-decoration: none;
            display: inline-block;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: linear-gradient(145deg, #2980b9, #21618c);
            transform: translateY(-2px);
        }

        .country-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 10px;
        }

        .country-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .country-item.occupied {
            border-left-color: #27ae60;
        }

        .country-item.latvia {
            border-left-color: #e74c3c;
            background: rgba(231, 76, 60, 0.1);
        }

        .player-name {
            font-size: 0.9em;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="latvia.html" class="back-btn">‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –∫ –õ–∞—Ç–≤–∏–∏</a>
        
        <header>
            <h1>üß± –ü–∏–∫—Å–µ–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ –ï–≤—Ä–æ–ø—ã</h1>
            <div style="opacity: 0.9;">–ö–∞—Ä—Ç–∞ –¥–ª—è –õ–∞—Ç–≤–∏–∏ ‚Ä¢ 30 —Å—Ç—Ä–∞–Ω —Å –∏–≥—Ä–æ–∫–∞–º–∏</div>
        </header>

        <div class="content">
            <div class="map-container">
                <div class="pixel-map" id="pixel-map">
                    <!-- –ü–∏–∫—Å–µ–ª–∏ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </div>

            <div class="controls">
                <div class="control-group">
                    <h2>üé® –õ–µ–≥–µ–Ω–¥–∞ –∫–∞—Ä—Ç—ã</h2>
                    <div class="legend">
                        <div class="color-box" style="background-color: #e74c3c;"></div>
                        <span>–õ–∞—Ç–≤–∏—è (–≤–∞—à–∞ —Å—Ç—Ä–∞–Ω–∞)</span>
                    </div>
                    <div class="legend">
                        <div class="color-box" style="background-color: #27ae60;"></div>
                        <span>–ó–∞–Ω—è—Ç—ã–µ —Å—Ç—Ä–∞–Ω—ã</span>
                    </div>
                    <div class="legend">
                        <div class="color-box" style="background-color: #3498db;"></div>
                        <span>–°–≤–æ–±–æ–¥–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã</span>
                    </div>
                </div>

                <div class="control-group">
                    <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                    <div class="status-info">
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-value" id="total-countries">30</div>
                                <div class="stat-label">–í—Å–µ–≥–æ —Å—Ç—Ä–∞–Ω</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="occupied-countries">15</div>
                                <div class="stat-label">–ó–∞–Ω—è—Ç–æ</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="available-countries">14</div>
                                <div class="stat-label">–°–≤–æ–±–æ–¥–Ω–æ</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="your-country">1</div>
                                <div class="stat-label">–í–∞—à–∞ —Å—Ç—Ä–∞–Ω–∞</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <h2>üåç –°–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω</h2>
                    <div class="country-list" id="country-list">
                        <!-- –°–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                </div>

                <div class="control-group">
                    <h2>üìç –î–µ—Ç–∞–ª–∏ —Ä–µ–≥–∏–æ–Ω–∞</h2>
                    <div class="region-details" id="region-details">
                        <div style="text-align: center; padding: 20px;">
                            <div style="font-size: 3em; margin-bottom: 10px;">üß±</div>
                            <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</h3>
                            <p>–ù–∞–≤–µ–¥–∏—Ç–µ –∫—É—Ä—Å–æ—Ä –Ω–∞ –ª—é–±—É—é —Å—Ç—Ä–∞–Ω—É –Ω–∞ –∫–∞—Ä—Ç–µ</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω –∏–∑ –≤–∞—à–µ–≥–æ —Å–ø–∏—Å–∫–∞
        const countriesData = {
            // –õ–∞—Ç–≤–∏—è (–æ—Å–æ–±—ã–π —Å—Ç–∞—Ç—É—Å)
            'latvia': { name: '–õ–∞—Ç–≤–∏—è', player: '–Ω–µ –∑–∞–Ω—è—Ç–æ', color: '#e74c3c', status: 'latvia' },
            
            // –ó–∞–Ω—è—Ç—ã–µ —Å—Ç—Ä–∞–Ω—ã
            'austria': { name: '–ê–≤—Å—Ç—Ä–∏—è', player: '–ö–æ–ª—è', color: '#27ae60', status: 'occupied' },
            'belarus': { name: '–ë–µ–ª–∞—Ä—É—Å—å', player: '–≠–ª—è', color: '#27ae60', status: 'occupied' },
            'belgium': { name: '–ë–µ–ª—å–≥–∏—è', player: '–Ω–µ –∑–∞–Ω—è—Ç–æ', color: '#3498db', status: 'available' },
            'bulgaria': { name: '–ë–æ–ª–≥–∞—Ä–∏—è', player: '–ö–æ—Å—Ç—è', color: '#27ae60', status: 'occupied' },
            'croatia': { name: '–•–æ—Ä–≤–∞—Ç–∏—è', player: '–í–∏–∫–∞ –î—Ä—É', color: '#27ae60', status: 'occupied' },
            'czechia': { name: '–ß–µ—Ö–∏—è', player: '–Ω–µ –∑–∞–Ω—è—Ç–æ', color: '#3498db', status: 'available' },
            'denmark': { name: '–î–∞–Ω–∏—è', player: '–Ω–µ –∑–∞–Ω—è—Ç–æ', color: '#3498db', status: 'available' },
            'estonia': { name: '–≠—Å—Ç–æ–Ω–∏—è', player: '–Ω–µ –∑–∞–Ω—è—Ç–æ', color: '#3498db', status: 'available' },
            'finland': { name: '–§–∏–Ω–ª—è–Ω–¥–∏—è', player: '–õ—ë—à–∞', color: '#27ae60', status: 'occupied' },
            'france': { name: '–§—Ä–∞–Ω—Ü–∏—è', player: '–ü–æ–ª–∏–Ω–∞', color: '#27ae60', status: 'occupied' },
            'germany': { name: '–ì–µ—Ä–º–∞–Ω–∏—è', player: '–ù–∏–∫–∏—Ç–∞ –ò.', color: '#27ae60', status: 'occupied' },
            'greece': { name: '–ì—Ä–µ—Ü–∏—è', player: '–ú–∏–ª–∞–Ω–∞', color: '#27ae60', status: 'occupied' },
            'hungary': { name: '–í–µ–Ω–≥—Ä–∏—è', player: '–Ω–µ –∑–∞–Ω—è—Ç–æ', color: '#3498db', status: 'available' },
            'iceland': { name: '–ò—Å–ª–∞–Ω–¥–∏—è', player: '–Ω–µ –∑–∞–Ω—è—Ç–æ', color: '#3498db', status: 'available' },
            'ireland': { name: '–ò—Ä–ª–∞–Ω–¥–∏—è', player: '–Ω–µ –∑–∞–Ω—è—Ç–æ', color: '#3498db', status: 'available' },
            'italy': { name: '–ò—Ç–∞–ª–∏—è', player: '–≠–≤–µ–ª–∏–Ω–∞', color: '#27ae60', status: 'occupied' },
            'lithuania': { name: '–õ–∏—Ç–≤–∞', player: '–Ω–µ –∑–∞–Ω—è—Ç–æ', color: '#3498db', status: 'available' },
            'luxembourg': { name: '–õ—é–∫—Å–µ–º–±—É—Ä–≥', player: '–ö–∞—Ä–ø–æ–≤–∏—á', color: '#27ae60', status: 'occupied' },
            'malta': { name: '–ú–∞–ª—å—Ç–∞', player: '–ê—Ä–∏–Ω–∞', color: '#27ae60', status: 'occupied' },
            'moldova': { name: '–ú–æ–ª–¥–∞–≤–∏—è', player: '–Ω–µ –∑–∞–Ω—è—Ç–æ', color: '#3498db', status: 'available' },
            'monaco': { name: '–ú–æ–Ω–∞–∫–æ', player: '–ö–∞—Ç—Ä–∏–Ω–∞', color: '#27ae60', status: 'occupied' },
            'montenegro': { name: '–ß–µ—Ä–Ω–æ–≥–æ—Ä–∏—è', player: '–ö–∏—Ä–∞', color: '#27ae60', status: 'occupied' },
            'netherlands': { name: '–ù–∏–¥–µ—Ä–ª–∞–Ω–¥—ã', player: '–Ω–µ –∑–∞–Ω—è—Ç–æ', color: '#3498db', status: 'available' },
            'north_macedonia': { name: '–°–µ–≤–µ—Ä–Ω–∞—è –ú–∞–∫–µ–¥–æ–Ω–∏—è', player: '–Ω–µ –∑–∞–Ω—è—Ç–æ', color: '#3498db', status: 'available' },
            'norway': { name: '–ù–æ—Ä–≤–µ–≥–∏—è', player: '–í–µ—Ä–æ–Ω–∏–∫–∞', color: '#27ae60', status: 'occupied' },
            'poland': { name: '–ü–æ–ª—å—à–∞', player: '–î–∞–Ω–∏–∫', color: '#27ae60', status: 'occupied' },
            'portugal': { name: '–ü–æ—Ä—Ç—É–≥–∞–ª–∏—è', player: '–Ω–µ –∑–∞–Ω—è—Ç–æ', color: '#3498db', status: 'available' },
            'albania': { name: '–ê–ª–±–∞–Ω–∏—è', player: '–Ω–µ –∑–∞–Ω—è—Ç–æ', color: '#3498db', status: 'available' },
            'andorra': { name: '–ê–Ω–¥–æ—Ä—Ä–∞', player: '–Ω–µ –∑–∞–Ω—è—Ç–æ', color: '#3498db', status: 'available' }
        };

        // –£–ª—É—á—à–µ–Ω–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω (–±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ)
        const countryPixels = {
            // –ë–∞–ª—Ç–∏–π—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω—ã
            'latvia': generateRectangle(28, 10, 4, 3),
            'lithuania': generateRectangle(26, 10, 4, 3),
            'estonia': generateRectangle(28, 7, 4, 3),
            
            // –°–∫–∞–Ω–¥–∏–Ω–∞–≤–∏—è
            'finland': generateRectangle(25, 3, 6, 6),
            'norway': generateRectangle(20, 3, 6, 8),
            'denmark': generateRectangle(22, 10, 3, 2),
            'iceland': generateRectangle(12, 3, 4, 3),
            'sweden': generateRectangle(22, 5, 5, 5),
            
            // –ó–∞–ø–∞–¥–Ω–∞—è –ï–≤—Ä–æ–ø–∞
            'ireland': generateRectangle(15, 8, 3, 3),
            'united_kingdom': generateRectangle(17, 8, 4, 4),
            'france': generateRectangle(20, 12, 6, 5),
            'belgium': generateRectangle(22, 11, 2, 2),
            'netherlands': generateRectangle(22, 9, 2, 2),
            'germany': generateRectangle(24, 10, 5, 4),
            'austria': generateRectangle(26, 12, 3, 3),
            'switzerland': generateRectangle(23, 13, 2, 2),
            
            // –Æ–∂–Ω–∞—è –ï–≤—Ä–æ–ø–∞
            'portugal': generateRectangle(16, 15, 3, 4),
            'spain': generateRectangle(19, 15, 5, 4),
            'italy': generateRectangle(26, 15, 3, 6),
            'greece': generateRectangle(30, 16, 3, 3),
            'croatia': generateRectangle(27, 13, 3, 2),
            'bulgaria': generateRectangle(30, 13, 3, 3),
            'albania': [[29, 15]],
            'montenegro': [[28, 15]],
            'north_macedonia': [[29, 14]],
            'hungary': generateRectangle(28, 12, 3, 2),
            'czechia': generateRectangle(25, 11, 3, 2),
            
            // –í–æ—Å—Ç–æ—á–Ω–∞—è –ï–≤—Ä–æ–ø–∞
            'poland': generateRectangle(26, 9, 4, 3),
            'belarus': generateRectangle(29, 8, 4, 4),
            'moldova': generateRectangle(31, 12, 2, 2),
            'ukraine': generateRectangle(31, 9, 6, 5),
            'romania': generateRectangle(29, 12, 4, 3),
            
            // –ú–∏–∫—Ä–æ–≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–∞
            'andorra': [[21, 14]],
            'monaco': [[23, 14]],
            'luxembourg': [[23, 11]],
            'malta': [[26, 18]],
            'liechtenstein': [[24, 12]],
            'san_marino': [[26, 14]]
        };

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
        function generateRectangle(startX, startY, width, height) {
            const pixels = [];
            for (let x = startX; x < startX + width; x++) {
                for (let y = startY; y < startY + height; y++) {
                    pixels.push([x, y]);
                }
            }
            return pixels;
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –ø–∏–∫—Å–µ–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã
        function createPixelMap() {
            const pixelMap = document.getElementById('pixel-map');
            pixelMap.innerHTML = '';

            // –°–æ–∑–¥–∞–µ–º —Å–µ—Ç–∫—É 60x40
            for (let y = 0; y < 40; y++) {
                for (let x = 0; x < 60; x++) {
                    const pixel = document.createElement('div');
                    pixel.className = 'pixel empty';
                    pixel.dataset.x = x;
                    pixel.dataset.y = y;
                    
                    // –ù–∞—Ö–æ–¥–∏–º —Å—Ç—Ä–∞–Ω—É –¥–ª—è —ç—Ç–æ–≥–æ –ø–∏–∫—Å–µ–ª—è
                    const country = findCountryForPixel(x, y);
                    if (country && countriesData[country]) {
                        pixel.dataset.country = country;
                        pixel.style.background = countriesData[country].color;
                        pixel.textContent = getCountryCode(country);
                    }
                    
                    pixel.addEventListener('mouseenter', handlePixelHover);
                    pixel.addEventListener('mouseleave', handlePixelLeave);
                    
                    pixelMap.appendChild(pixel);
                }
            }
            
            addCountryBorders();
            updateStatistics();
            createCountryList();
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∞–º–∏
        function addCountryBorders() {
            const pixels = document.querySelectorAll('.pixel:not(.empty)');
            
            pixels.forEach(pixel => {
                const x = parseInt(pixel.dataset.x);
                const y = parseInt(pixel.dataset.y);
                const country = pixel.dataset.country;

                const neighbors = [
                    {dx: 0, dy: -1, border: 'top'},
                    {dx: 1, dy: 0, border: 'right'},
                    {dx: 0, dy: 1, border: 'bottom'},
                    {dx: -1, dy: 0, border: 'left'}
                ];

                neighbors.forEach(neighbor => {
                    const nx = x + neighbor.dx;
                    const ny = y + neighbor.dy;
                    
                    if (isValidCoordinate(nx, ny)) {
                        const neighborCountry = findCountryForPixel(nx, ny);
                        if (neighborCountry !== country) {
                            const border = document.createElement('div');
                            border.className = `country-border border-${neighbor.border}`;
                            pixel.appendChild(border);
                        }
                    } else {
                        const border = document.createElement('div');
                        border.className = `country-border border-${neighbor.border}`;
                        pixel.appendChild(border);
                    }
                });
            });
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
        function isValidCoordinate(x, y) {
            return x >= 0 && x < 60 && y >= 0 && y < 40;
        }

        // –ü–æ–∏—Å–∫ —Å—Ç—Ä–∞–Ω—ã –¥–ª—è –ø–∏–∫—Å–µ–ª—è
        function findCountryForPixel(x, y) {
            for (const [country, pixels] of Object.entries(countryPixels)) {
                if (pixels.some(([px, py]) => px === x && py === y)) {
                    return country;
                }
            }
            return null;
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω—ã
        function getCountryCode(countryId) {
            const codes = {
                'latvia': 'LV', 'lithuania': 'LT', 'estonia': 'EE',
                'finland': 'FI', 'norway': 'NO', 'denmark': 'DK', 'iceland': 'IS',
                'france': 'FR', 'germany': 'DE', 'italy': 'IT', 'spain': 'ES',
                'poland': 'PL', 'belarus': 'BY', 'ukraine': 'UA', 'czechia': 'CZ',
                'austria': 'AT', 'hungary': 'HU', 'romania': 'RO', 'bulgaria': 'BG',
                'greece': 'GR', 'croatia': 'HR', 'serbia': 'RS', 'albania': 'AL',
                'montenegro': 'ME', 'north_macedonia': 'MK', 'bosnia': 'BA',
                'slovenia': 'SI', 'slovakia': 'SK', 'belgium': 'BE', 'netherlands': 'NL',
                'portugal': 'PT', 'ireland': 'IE', 'sweden': 'SE', 'switzerland': 'CH',
                'andorra': 'AD', 'monaco': 'MC', 'liechtenstein': 'LI', 'san_marino': 'SM',
                'malta': 'MT', 'moldova': 'MD'
            };
            return codes[countryId] || countryId.substring(0, 2).toUpperCase();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStatistics() {
            const total = Object.keys(countriesData).length;
            const occupied = Object.values(countriesData).filter(c => c.status === 'occupied').length;
            const available = Object.values(countriesData).filter(c => c.status === 'available').length;
            const latvia = Object.values(countriesData).filter(c => c.status === 'latvia').length;
            
            document.getElementById('total-countries').textContent = total;
            document.getElementById('occupied-countries').textContent = occupied;
            document.getElementById('available-countries').textContent = available;
            document.getElementById('your-country').textContent = latvia;
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞–Ω
        function createCountryList() {
            const countryList = document.getElementById('country-list');
            countryList.innerHTML = '';

            Object.entries(countriesData).forEach(([id, data]) => {
                const item = document.createElement('div');
                item.className = `country-item ${data.status}`;
                item.innerHTML = `
                    <div>
                        <strong>${data.name}</strong>
                        <div class="player-name">${data.player}</div>
                    </div>
                    <div style="font-size: 0.8em; opacity: 0.7;">${getCountryCode(id)}</div>
                `;
                countryList.appendChild(item);
            });
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        function handlePixelHover(event) {
            const pixel = event.target;
            const countryId = pixel.dataset.country;
            
            if (countryId && countriesData[countryId]) {
                const country = countriesData[countryId];
                const detailsElement = document.getElementById('region-details');
                
                detailsElement.innerHTML = `
                    <div class="country-name">${country.name}</div>
                    <div class="coordinates">–ò–≥—Ä–æ–∫: ${country.player}</div>
                    <div class="detail-item">
                        <span class="detail-label">–°—Ç–∞—Ç—É—Å:</span>
                        <span class="detail-value">${
                            country.status === 'latvia' ? '–í–∞—à–∞ —Å—Ç—Ä–∞–Ω–∞' : 
                            country.status === 'occupied' ? '–ó–∞–Ω—è—Ç–∞' : '–°–≤–æ–±–æ–¥–Ω–∞'
                        }</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">–ö–æ–¥:</span>
                        <span class="detail-value">${getCountryCode(countryId)}</span>
                    </div>
                `;
            }
        }

        function handlePixelLeave(event) {
            const detailsElement = document.getElementById('region-details');
            detailsElement.innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 3em; margin-bottom: 10px;">üß±</div>
                    <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</h3>
                    <p>–ù–∞–≤–µ–¥–∏—Ç–µ –∫—É—Ä—Å–æ—Ä –Ω–∞ –ª—é–±—É—é —Å—Ç—Ä–∞–Ω—É –Ω–∞ –∫–∞—Ä—Ç–µ</p>
                </div>
            `;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function initialize() {
            createPixelMap();
        }

        document.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>
</html>

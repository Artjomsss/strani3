<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ò–≥—Ä–∞ —Å–æ —Å—Ç—Ä–∞–Ω–∞–º–∏ –∏ –∞–ª—å—è–Ω—Å–∞–º–∏</title>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

    // üî• –¢–≤–æ–π Firebase –∫–æ–Ω—Ñ–∏–≥
    const firebaseConfig = {
      apiKey: "AIzaSyDRUoIzXpwwAGYM0qciAYdQm-wtMKqLsVs",
      authDomain: "strani3.firebaseapp.com",
      projectId: "strani3",
      storageBucket: "strani3.firebasestorage.app",
      messagingSenderId: "225168183800",
      appId: "1:225168183800:web:825e782a35bccca89d460d",
      measurementId: "G-3NKBET5R9J"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // –°—Ç—Ä–∞–Ω—ã
    const countries = [
      "–ê–ª–±–∞–Ω–∏—è","–ê–Ω–¥–æ—Ä—Ä–∞","–ê–≤—Å—Ç—Ä–∏—è","–ë–µ–ª–∞—Ä—É—Å—å","–ë–µ–ª—å–≥–∏—è","–ë–æ–ª–≥–∞—Ä–∏—è",
      "–•–æ—Ä–≤–∞—Ç–∏—è","–ß–µ—Ö–∏—è","–î–∞–Ω–∏—è","–≠—Å—Ç–æ–Ω–∏—è","–§–∏–Ω–ª—è–Ω–¥–∏—è","–§—Ä–∞–Ω—Ü–∏—è",
      "–ì–µ—Ä–º–∞–Ω–∏—è","–ì—Ä–µ—Ü–∏—è","–í–µ–Ω–≥—Ä–∏—è","–ò—Å–ª–∞–Ω–¥–∏—è","–ò—Ä–ª–∞–Ω–¥–∏—è","–ò—Ç–∞–ª–∏—è",
      "–õ–∞—Ç–≤–∏—è","–õ–∏—Ç–≤–∞","–õ—é–∫—Å–µ–º–±—É—Ä–≥","–ú–∞–ª—å—Ç–∞","–ú–æ–ª–¥–∞–≤–∏—è","–ú–æ–Ω–∞–∫–æ",
      "–ß–µ—Ä–Ω–æ–≥–æ—Ä–∏—è","–ù–∏–¥–µ—Ä–ª–∞–Ω–¥—ã","–°–µ–≤–µ—Ä–Ω–∞—è –ú–∞–∫–µ–¥–æ–Ω–∏—è","–ù–æ—Ä–≤–µ–≥–∏—è",
      "–ü–æ–ª—å—à–∞","–ü–æ—Ä—Ç—É–≥–∞–ª–∏—è"
    ];

    const codes = {
      "ALB123": "albania.html","AND456": "andorra.html","AUT789": "austria.html",
      "BLR321": "belarus.html","BEL654": "belgium.html","BGR987": "bulgaria.html",
      "HRV147": "croatia.html","CZE258": "czechia.html","DNK369": "denmark.html",
      "EST741": "estonia.html","FIN852": "finland.html","FRA963": "france.html",
      "GER159": "germany.html","GRC357": "greece.html","HUN753": "hungary.html",
      "ISL951": "iceland.html","IRL147": "ireland.html","ITA258": "italy.html",
      "LVA369": "latvia.html","LTU741": "lithuania.html","LUX852": "luxembourg.html",
      "MLT963": "malta.html","MDA159": "moldova.html","MCO357": "monaco.html",
      "MNE753": "montenegro.html","NLD951": "netherlands.html","MKD147": "northmacedonia.html",
      "NOR258": "norway.html","POL369": "poland.html","PRT741": "portugal.html"
    };

    // –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞–Ω
    function renderCountries() {
      const list = document.getElementById("countryList");
      countries.forEach(c => {
        const div = document.createElement("div");
        div.className = "country-card";
        div.innerHTML = `<h2>${c}</h2><div class="status">‚Äì –Ω–µ –∑–∞–Ω—è—Ç–æ</div>`;
        list.appendChild(div);
      });
    }

    // –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ –∫–æ–¥—É —Å—Ç—Ä–∞–Ω—ã
    function goToCountry() {
      const val = document.getElementById("codeInput").value.trim().toUpperCase();
      if(!val){ alert("–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥"); return; }
      if(codes[val]){
        window.location.href = codes[val];
      } else {
        alert("–ö–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω");
      }
    }

    // Firestore: —Å–æ–∑–¥–∞—Ç—å –∞–ª—å—è–Ω—Å
    async function createAlliance(name) {
      await addDoc(collection(db, "alliances"), { name, createdAt: new Date() });
      document.getElementById("allianceName").value = "";
      loadAlliances();
    }

    // Firestore: –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–ª—å—è–Ω—Å–æ–≤
    async function loadAlliances() {
      const list = document.getElementById("alliances");
      list.innerHTML = "";
      const snapshot = await getDocs(collection(db, "alliances"));
      snapshot.forEach(doc => {
        const li = document.createElement("li");
        li.textContent = doc.data().name;
        list.appendChild(li);
      });
    }

    window.onload = () => {
      renderCountries();
      loadAlliances();
      document.getElementById("goBtn").onclick = goToCountry;
      document.getElementById("createBtn").onclick = () => {
        const name = document.getElementById("allianceName").value.trim();
        if(name) createAlliance(name);
      };
    };
  </script>
  <style>
    body { background:#111; color:#eee; font-family:Arial; padding:20px; }
    h1 { text-align:center; }
    .input-box { text-align:center; margin-bottom:20px; }
    input { padding:10px; border-radius:5px; border:none; width:200px; }
    button { padding:10px 15px; margin-left:10px; border:none; border-radius:5px; background:#4caf50; color:#fff; cursor:pointer; }
    button:hover { background:#45a049; }
    .container { max-width:900px; margin:auto; }
    .country-list { display:grid; grid-template-columns:repeat(auto-fill,minmax(250px,1fr)); gap:15px; }
    .country-card { background:#2a2a2a; padding:15px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.5); }
    .country-card h2 { margin:0; }
    .status { color:#ccc; font-size:14px; }
    .alliances-section { margin-top:40px; }
  </style>
</head>
<body>
  <h1>–ò–≥—Ä–∞ —Å–æ —Å—Ç—Ä–∞–Ω–∞–º–∏ –∏ –∞–ª—å—è–Ω—Å–∞–º–∏</h1>

  <div class="input-box">
    <input type="text" id="codeInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ —Å—Ç—Ä–∞–Ω—ã">
    <button id="goBtn">–ü–µ—Ä–µ–π—Ç–∏</button>
  </div>

  <div class="container">
    <h2>–°–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω</h2>
    <div class="country-list" id="countryList"></div>

    <div class="alliances-section">
      <h2>–ê–ª—å—è–Ω—Å—ã</h2>
      <input id="allianceName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∞–ª—å—è–Ω—Å–∞">
      <button id="createBtn">–°–æ–∑–¥–∞—Ç—å –∞–ª—å—è–Ω—Å</button>
      <ul id="alliances"></ul>
    </div>
  </div>
</body>
</html>

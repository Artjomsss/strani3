<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–õ–∏—Ç–≤–∞</title>
<style>
body { 
  background:#111; 
  color:#eee; 
  font-family:Arial; 
  margin:0; 
  padding:0;
}
header {
  background:#222;
  padding:10px;
  text-align:center;
}
.container {
  display:grid;
  grid-template-columns: 1fr 2fr 1fr;
  grid-template-rows: auto 1fr auto;
  height:100vh;
}
.resources {
  grid-column:1 / span 3;
  background:#1b1b1b;
  padding:10px;
  display:flex;
  justify-content:space-around;
}
.panel {
  padding:10px;
  background:#1e1e1e;
  overflow-y:auto;
}
.mail { border-right:2px solid #333; }
.country-list { border-left:2px solid #333; }
.bottom {
  grid-column:1 / span 3;
  background:#222;
  padding:10px;
  display:flex;
  justify-content:center;
  gap:15px;
}
button {
  background:#4caf50;
  color:#fff;
  border:none;
  border-radius:5px;
  padding:10px 15px;
  cursor:pointer;
}
button:hover { background:#45a049; }
.hidden { display:none; }
h3 { margin-top:0; }
.alliance-box {
  background:#2a2a2a;
  padding:10px;
  border-radius:5px;
  margin-top:10px;
}
</style>
</head>
<body>
<header>
  <h1>–õ–∏—Ç–≤–∞</h1>
</header>

<div class="container">
  <div class="resources">
    <div>üí∞ –ó–æ–ª–æ—Ç–æ: <span id="gold">100</span></div>
    <div>üë• –ù–∞—Å–µ–ª–µ–Ω–∏–µ: <span id="population">2000000</span></div>
    <div>üìà –î–æ—Ö–æ–¥: <span id="income">0</span>/—Å–µ–∫</div>
    <div>‚öî –ê—Ä–º–∏—è: <span id="army">0</span></div>
  </div>

  <div class="panel mail">
    <h3>–ü–æ—á—Ç–∞</h3>
    <div id="mailBox"></div>
  </div>

  <div class="panel center">
    <h3 id="panelTitle">–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ</h3>
    <div id="actions"></div>
  </div>

  <div class="panel country-list">
    <h3>–°—Ç—Ä–∞–Ω—ã</h3>
    <ul>
      <li>üá±üáπ –õ–∏—Ç–≤–∞</li>
      <li>üá±üáª –õ–∞—Ç–≤–∏—è</li>
      <li>üá™üá™ –≠—Å—Ç–æ–Ω–∏—è</li>
      <li>üáµüá± –ü–æ–ª—å—à–∞</li>
    </ul>
  </div>

  <div class="bottom">
    <button onclick="openPolitics()">–ü–æ–ª–∏—Ç. –¥–µ–π—Å—Ç–≤–∏—è</button>
    <button onclick="openBuildings()">–°—Ç—Ä–æ–π–∫–∞</button>
  </div>
</div>

<script>
let player = {
  gold: 100,
  population: 2000000,
  income: 0,
  army: 0,
  alliance: null,
  isLeader: false
};

let alliance = { name: null, members: [] };
let factories = { food: 0, steel: 0 };

function updateUI() {
  document.getElementById("gold").textContent = player.gold;
  document.getElementById("population").textContent = player.population.toLocaleString();
  document.getElementById("income").textContent = player.income;
  document.getElementById("army").textContent = player.army;
}

// === –ü–æ–ª–∏—Ç–∏–∫–∞ ===
function openPolitics() {
  document.getElementById("panelTitle").textContent = "–ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è";
  let html = "";

  if (!player.alliance) {
    html += `<button onclick="createAlliance()">–°–æ–∑–¥–∞—Ç—å –∞–ª—å—è–Ω—Å</button>`;
  } else {
    html += `<div class="alliance-box">
               –ê–ª—å—è–Ω—Å: ${alliance.name}<br>
               –£—á–∞—Å—Ç–Ω–∏–∫–∏: ${alliance.members.join(", ")}
             </div>`;
    html += `<button onclick="leaveAlliance()">–í—ã–π—Ç–∏ –∏–∑ –∞–ª—å—è–Ω—Å–∞</button>`;
    if (player.isLeader) {
      html += `<button onclick="kickMember()">–í—ã–≥–Ω–∞—Ç—å —Å—Ç—Ä–∞–Ω—É</button>`;
    }
  }

  html += `<button onclick="declareWar()">–û–±—ä—è–≤–∏—Ç—å –≤–æ–π–Ω—É</button>`;
  document.getElementById("actions").innerHTML = html;
}

function createAlliance() {
  if (alliance.name) {
    alert("–í—ã —É–∂–µ –≤ –∞–ª—å—è–Ω—Å–µ!");
    return;
  }
  const name = prompt("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∞–ª—å—è–Ω—Å–∞:");
  if (!name) return;

  alliance.name = name;
  alliance.members = ["–õ–∏—Ç–≤–∞"];
  player.alliance = alliance.name;
  player.isLeader = true;
  openPolitics();
  alert("–ê–ª—å—è–Ω—Å —Å–æ–∑–¥–∞–Ω: " + name);
}

function leaveAlliance() {
  player.alliance = null;
  player.isLeader = false;
  alliance = { name: null, members: [] };
  openPolitics();
}

function kickMember() {
  const target = prompt("–í–≤–µ–¥–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è:");
  if (!target) return;
  if (alliance.members.includes(target)) {
    alliance.members = alliance.members.filter(m => m !== target);
    alert("–°—Ç—Ä–∞–Ω–∞ " + target + " –∏—Å–∫–ª—é—á–µ–Ω–∞ –∏–∑ –∞–ª—å—è–Ω—Å–∞");
    openPolitics();
  } else {
    alert("–¢–∞–∫–æ–π —Å—Ç—Ä–∞–Ω—ã –Ω–µ—Ç –≤ –∞–ª—å—è–Ω—Å–µ");
  }
}

function declareWar() {
  const enemy = prompt("–í–≤–µ–¥–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É, –∫–æ—Ç–æ—Ä–æ–π —Ö–æ—Ç–∏—Ç–µ –æ–±—ä—è–≤–∏—Ç—å –≤–æ–π–Ω—É:");
  if (!enemy) return;
  const box = document.getElementById("mailBox");
  box.innerHTML += `<div>üì© –í–æ–π–Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–µ ${enemy}</div>`;
}

// === –°—Ç—Ä–æ–π–∫–∏ ===
function openBuildings() {
  document.getElementById("panelTitle").textContent = "–°—Ç—Ä–æ–π–∫–∏";
  document.getElementById("actions").innerHTML = `
    <button onclick="buildFactory('food')">–§–∞–±—Ä–∏–∫–∞ –µ–¥—ã (+1 –¥–æ—Ö–æ–¥)</button>
    <button onclick="buildFactory('steel')">–§–∞–±—Ä–∏–∫–∞ —Å—Ç–∞–ª–∏ (+1 –¥–æ—Ö–æ–¥)</button>
    <button onclick="trainArmy()">–ö–∞–∑–∞—Ä–º–∞ (+10 –∞—Ä–º–∏–∏)</button>
  `;
}

function buildFactory(type) {
  if (player.gold < 50) {
    alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–æ–ª–æ—Ç–∞!");
    return;
  }
  player.gold -= 50;
  factories[type]++;
  player.income++;
  updateUI();
}

function trainArmy() {
  if (player.gold < 30) {
    alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–æ–ª–æ—Ç–∞!");
    return;
  }
  player.gold -= 30;
  player.army += 10;
  updateUI();
}

// === –î–æ—Ö–æ–¥ –æ—Ç –Ω–∞—Å–µ–ª–µ–Ω–∏—è ===
setInterval(() => {
  player.gold += Math.floor(player.population / 100000); // 1 –∑–æ–ª–æ—Ç–æ –∑–∞ 100–∫ –Ω–∞—Å–µ–ª–µ–Ω–∏—è
  player.gold += player.income; // –¥–æ—Ö–æ–¥ –æ—Ç —Ñ–∞–±—Ä–∏–∫
  updateUI();
}, 1000);

updateUI();
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Литва</title>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getFirestore, doc, getDoc, setDoc, updateDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyDRUoIzXpwwAGYM0qciAYdQm-wtMKqLsVs",
  authDomain: "strani3.firebaseapp.com",
  projectId: "strani3",
  storageBucket: "strani3.firebasestorage.app",
  messagingSenderId: "225168183800",
  appId: "1:225168183800:web:825e782a35bccca89d460d",
  measurementId: "G-3NKBET5R9J"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const countryId = "lithuania"; // ID документа страны

// Загружаем статистику
async function loadStats() {
  const ref = doc(db, "countries", countryId);
  const snap = await getDoc(ref);

  if (snap.exists()) {
    const data = snap.data();
    document.getElementById("money").textContent = data.money ?? 0;
    document.getElementById("army").textContent = data.army ?? 0;
    document.getElementById("income").textContent = data.income ?? 0;
  } else {
    // если страны нет в базе — создаём
    await setDoc(ref, { money: 0, army: 0, income: 0 });
    loadStats();
  }
}

// Пример функции изменения денег
async function addMoney() {
  const ref = doc(db, "countries", countryId);
  await updateDoc(ref, { money: (parseInt(document.getElementById("money").textContent) || 0) + 10 });
  loadStats();
}

window.onload = () => {
  loadStats();
  document.getElementById("btnMoney").onclick = addMoney;
};
</script>
<style>
body { background:#111; color:#eee; font-family:Arial; padding:20px; }
h1 { text-align:center; }
.stats { background:#2a2a2a; padding:15px; border-radius:10px; max-width:400px; margin:auto; }
.stats div { margin:5px 0; }
button { padding:10px; border:none; border-radius:5px; background:#4caf50; color:#fff; cursor:pointer; margin-top:10px; }
button:hover { background:#45a049; }
</style>
</head>
<body>
<h1>Литва</h1>
<div class="stats">
  <div>Деньги: <span id="money">00</span></div>
  <div>Армия: <span id="army">00</span></div>
  <div>Доход: <span id="income">00</span></div>
</div>

<div style="text-align:center;">
  <button id="btnMoney">+10 денег</button>
</div>
</body>
</html>

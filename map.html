<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ä—Ç–∞ –ï–≤—Ä–æ–ø—ã - –í—Å–µ —Å—Ç—Ä–∞–Ω—ã</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0c0c1a, #1a1a2e);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 2000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.25), rgba(39, 174, 96, 0.2));
            border-radius: 25px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.15);
            box-shadow: 0 12px 40px rgba(0,0,0,0.4);
        }

        h1 {
            font-size: 3.2em;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #3498db, #2ecc71, #9b59b6, #3498db);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 4px 15px rgba(0,0,0,0.5);
            font-weight: 700;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 500px;
            gap: 35px;
            align-items: start;
        }

        .map-container {
            background: rgba(255,255,255,0.06);
            border-radius: 25px;
            padding: 30px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.12);
            box-shadow: 0 12px 40px rgba(0,0,0,0.4);
            height: 1000px;
            overflow: auto;
        }

        .europe-map {
            width: 1200px;
            height: 950px;
            background: linear-gradient(145deg, #23233a, #1a1a2e);
            border: 3px solid #3a3a5a;
            border-radius: 20px;
            filter: drop-shadow(0 8px 25px rgba(0,0,0,0.6));
        }

        .region {
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            stroke: rgba(255,255,255,0.9);
            stroke-width: 2;
            filter: drop-shadow(0 3px 8px rgba(0,0,0,0.4));
        }

        .region:hover {
            stroke-width: 4;
            stroke: #f39c12;
            filter: brightness(1.3) drop-shadow(0 6px 15px rgba(0,0,0,0.5));
            transform: scale(1.03);
        }

        .region-label {
            pointer-events: none;
            font-size: 11px;
            fill: white;
            text-anchor: middle;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
        }

        .controls {
            background: rgba(255,255,255,0.06);
            border-radius: 25px;
            padding: 35px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.12);
            box-shadow: 0 12px 40px rgba(0,0,0,0.4);
            position: sticky;
            top: 20px;
        }

        .control-group {
            margin-bottom: 35px;
        }

        h2 {
            color: #3498db;
            margin-bottom: 25px;
            font-size: 1.8em;
            text-shadow: 0 3px 8px rgba(0,0,0,0.4);
            font-weight: 600;
        }

        h3 {
            color: #2ecc71;
            margin-bottom: 20px;
            font-size: 1.6em;
            font-weight: 600;
        }

        .legend {
            display: grid;
            grid-template-columns: 25px 1fr;
            gap: 12px;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(255,255,255,0.08);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .color-box {
            width: 25px;
            height: 25px;
            border-radius: 6px;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .status-info {
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.2), rgba(41, 128, 185, 0.15));
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #3498db;
        }

        .region-details {
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.2), rgba(39, 174, 96, 0.15));
            padding: 25px;
            border-radius: 15px;
            margin-top: 25px;
            border-left: 5px solid #2ecc71;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .detail-label {
            font-weight: bold;
            color: #bdc3c7;
        }

        .detail-value {
            color: #ecf0f1;
            font-weight: 500;
        }

        .filters {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 12px;
            margin-bottom: 25px;
        }

        .filter-btn {
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.3), rgba(41, 128, 185, 0.2));
            border: 1px solid #3498db;
            color: white;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #3498db, #2980b9);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .stat-item {
            background: rgba(255,255,255,0.08);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #3498db;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            color: #bdc3c7;
        }

        @keyframes glow {
            0% { filter: brightness(1) drop-shadow(0 3px 8px rgba(0,0,0,0.4)); }
            50% { filter: brightness(1.3) drop-shadow(0 3px 12px rgba(0,0,0,0.6)); }
            100% { filter: brightness(1) drop-shadow(0 3px 8px rgba(0,0,0,0.4)); }
        }

        .updating {
            animation: glow 1.2s ease-in-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üó∫Ô∏è –ö–∞—Ä—Ç–∞ –ï–≤—Ä–æ–ø—ã - –í—Å–µ —Å—Ç—Ä–∞–Ω—ã</h1>
            <div style="font-size: 1.3em; opacity: 0.9;">30 —Å—Ç—Ä–∞–Ω ‚Ä¢ 85 —Ä–µ–≥–∏–æ–Ω–æ–≤ ‚Ä¢ Real-time –¥–∞–Ω–Ω—ã–µ</div>
        </header>

        <div class="content">
            <div class="map-container">
                <div class="filters">
                    <button class="filter-btn active" onclick="setFilter('all')">üåç –í—Å–µ —Ä–µ–≥–∏–æ–Ω—ã</button>
                    <button class="filter-btn" onclick="setFilter('wars')">‚öîÔ∏è –í–æ–µ–Ω–Ω—ã–µ</button>
                    <button class="filter-btn" onclick="setFilter('rich')">üí∞ –ë–æ–≥–∞—Ç—ã–µ</button>
                </div>
                <svg class="europe-map" viewBox="0 0 1200 1000" id="europe-map">
                    <!-- –ó–∞–ø–∞–¥–Ω–∞—è –ï–≤—Ä–æ–ø–∞ -->
                    <!-- –§—Ä–∞–Ω—Ü–∏—è -->
                    <g class="country-group" data-country="france">
                        <path id="france_north" class="region" d="M300,400 L350,390 L360,430 L310,440 L305,420 Z" data-region="france_north" data-country="france"/>
                        <path id="france_south" class="region" d="M310,440 L360,430 L370,480 L320,490 L315,470 Z" data-region="france_south" data-country="france"/>
                        <path id="france_west" class="region" d="M250,420 L300,410 L305,460 L255,470 L250,440 Z" data-region="france_west" data-country="france"/>
                        <text x="330" y="420" class="region-label">FR-N</text>
                        <text x="340" y="460" class="region-label">FR-S</text>
                        <text x="280" y="440" class="region-label">FR-W</text>
                    </g>

                    <!-- –ì–µ—Ä–º–∞–Ω–∏—è -->
                    <g class="country-group" data-country="germany">
                        <path id="germany_north" class="region" d="M400,350 L450,340 L460,380 L410,390 L405,370 Z" data-region="germany_north" data-country="germany"/>
                        <path id="germany_south" class="region" d="M410,390 L460,380 L470,420 L420,430 L415,410 Z" data-region="germany_south" data-country="germany"/>
                        <path id="germany_east" class="region" d="M450,340 L500,330 L510,370 L460,380 L455,360 Z" data-region="germany_east" data-country="germany"/>
                        <text x="430" y="370" class="region-label">DE-N</text>
                        <text x="440" y="410" class="region-label">DE-S</text>
                        <text x="480" y="360" class="region-label">DE-E</text>
                    </g>

                    <!-- –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è -->
                    <g class="country-group" data-country="united_kingdom">
                        <path id="uk_england" class="region" d="M250,300 L300,290 L310,350 L260,360 L255,330 Z" data-region="uk_england" data-country="united_kingdom"/>
                        <path id="uk_scotland" class="region" d="M250,250 L300,240 L305,290 L255,300 L250,270 Z" data-region="uk_scotland" data-country="united_kingdom"/>
                        <text x="280" y="330" class="region-label">UK-E</text>
                        <text x="280" y="270" class="region-label">UK-S</text>
                    </g>

                    <!-- –ò—Å–ø–∞–Ω–∏—è -->
                    <g class="country-group" data-country="spain">
                        <path id="spain_north" class="region" d="M200,450 L250,440 L260,500 L210,510 L205,480 Z" data-region="spain_north" data-country="spain"/>
                        <path id="spain_south" class="region" d="M210,510 L260,500 L270,560 L220,570 L215,540 Z" data-region="spain_south" data-country="spain"/>
                        <text x="230" y="480" class="region-label">ES-N</text>
                        <text x="240" y="540" class="region-label">ES-S</text>
                    </g>

                    <!-- –ò—Ç–∞–ª–∏—è -->
                    <g class="country-group" data-country="italy">
                        <path id="italy_north" class="region" d="M450,480 L500,470 L510,510 L460,520 L455,500 Z" data-region="italy_north" data-country="italy"/>
                        <path id="italy_south" class="region" d="M460,520 L510,510 L520,560 L470,570 L465,540 Z" data-region="italy_south" data-country="italy"/>
                        <text x="480" y="500" class="region-label">IT-N</text>
                        <text x="490" y="540" class="region-label">IT-S</text>
                    </g>

                    <!-- –°–µ–≤–µ—Ä–Ω–∞—è –ï–≤—Ä–æ–ø–∞ -->
                    <!-- –®–≤–µ—Ü–∏—è -->
                    <g class="country-group" data-country="sweden">
                        <path id="sweden_north" class="region" d="M450,200 L500,190 L510,250 L460,260 L455,230 Z" data-region="sweden_north" data-country="sweden"/>
                        <path id="sweden_south" class="region" d="M460,260 L510,250 L520,300 L470,310 L465,280 Z" data-region="sweden_south" data-country="sweden"/>
                        <text x="480" y="230" class="region-label">SE-N</text>
                        <text x="490" y="280" class="region-label">SE-S</text>
                    </g>

                    <!-- –ù–æ—Ä–≤–µ–≥–∏—è -->
                    <g class="country-group" data-country="norway">
                        <path id="norway_north" class="region" d="M400,150 L450,140 L460,200 L410,210 L405,180 Z" data-region="norway_north" data-country="norway"/>
                        <path id="norway_south" class="region" d="M410,210 L460,200 L470,250 L420,260 L415,230 Z" data-region="norway_south" data-country="norway"/>
                        <text x="430" y="180" class="region-label">NO-N</text>
                        <text x="440" y="230" class="region-label">NO-S</text>
                    </g>

                    <!-- –§–∏–Ω–ª—è–Ω–¥–∏—è -->
                    <g class="country-group" data-country="finland">
                        <path id="finland_west" class="region" d="M550,200 L600,190 L610,250 L560,260 L555,230 Z" data-region="finland_west" data-country="finland"/>
                        <path id="finland_east" class="region" d="M600,190 L650,180 L660,240 L610,250 L605,220 Z" data-region="finland_east" data-country="finland"/>
                        <text x="580" y="230" class="region-label">FI-W</text>
                        <text x="630" y="220" class="region-label">FI-E</text>
                    </g>

                    <!-- –î–∞–Ω–∏—è -->
                    <g class="country-group" data-country="denmark">
                        <path id="denmark_main" class="region" d="M420,320 L450,315 L455,340 L425,345 Z" data-region="denmark_main" data-country="denmark"/>
                        <text x="435" y="330" class="region-label">DK</text>
                    </g>

                    <!-- –í–æ—Å—Ç–æ—á–Ω–∞—è –ï–≤—Ä–æ–ø–∞ -->
                    <!-- –ü–æ–ª—å—à–∞ -->
                    <g class="country-group" data-country="poland">
                        <path id="poland_west" class="region" d="M520,350 L570,340 L580,390 L530,400 L525,370 Z" data-region="poland_west" data-country="poland"/>
                        <path id="poland_east" class="region" d="M570,340 L620,330 L630,380 L580,390 L575,360 Z" data-region="poland_east" data-country="poland"/>
                        <text x="550" y="370" class="region-label">PL-W</text>
                        <text x="600" y="360" class="region-label">PL-E</text>
                    </g>

                    <!-- –£–∫—Ä–∞–∏–Ω–∞ -->
                    <g class="country-group" data-country="ukraine">
                        <path id="ukraine_west" class="region" d="M620,380 L670,370 L680,430 L630,440 L625,410 Z" data-region="ukraine_west" data-country="ukraine"/>
                        <path id="ukraine_east" class="region" d="M670,370 L720,360 L730,420 L680,430 L675,400 Z" data-region="ukraine_east" data-country="ukraine"/>
                        <text x="650" y="410" class="region-label">UA-W</text>
                        <text x="700" y="400" class="region-label">UA-E</text>
                    </g>

                    <!-- –†—É–º—ã–Ω–∏—è -->
                    <g class="country-group" data-country="romania">
                        <path id="romania_north" class="region" d="M580,450 L630,440 L640,490 L590,500 L585,470 Z" data-region="romania_north" data-country="romania"/>
                        <path id="romania_south" class="region" d="M590,500 L640,490 L650,540 L600,550 L595,520 Z" data-region="romania_south" data-country="romania"/>
                        <text x="610" y="470" class="region-label">RO-N</text>
                        <text x="620" y="520" class="region-label">RO-S</text>
                    </g>

                    <!-- –ë–∞–ª–∫–∞–Ω—ã -->
                    <!-- –ì—Ä–µ—Ü–∏—è -->
                    <g class="country-group" data-country="greece">
                        <path id="greece_north" class="region" d="M580,550 L630,540 L640,590 L590,600 L585,570 Z" data-region="greece_north" data-country="greece"/>
                        <path id="greece_south" class="region" d="M590,600 L640,590 L645,620 L595,630 Z" data-region="greece_south" data-country="greece"/>
                        <text x="610" y="570" class="region-label">GR-N</text>
                        <text x="615" y="610" class="region-label">GR-S</text>
                    </g>

                    <!-- –°–µ—Ä–±–∏—è -->
                    <g class="country-group" data-country="serbia">
                        <path id="serbia_north" class="region" d="M550,480 L580,475 L585,510 L555,515 Z" data-region="serbia_north" data-country="serbia"/>
                        <text x="567" y="495" class="region-label">RS</text>
                    </g>

                    <!-- –•–æ—Ä–≤–∞—Ç–∏—è -->
                    <g class="country-group" data-country="croatia">
                        <path id="croatia_coast" class="region" d="M520,460 L550,455 L555,490 L525,495 Z" data-region="croatia_coast" data-country="croatia"/>
                        <text x="537" y="475" class="region-label">HR</text>
                    </g>

                    <!-- –ë–æ–ª–≥–∞—Ä–∏—è -->
                    <g class="country-group" data-country="bulgaria">
                        <path id="bulgaria_north" class="region" d="M600,480 L630,475 L635,520 L605,525 Z" data-region="bulgaria_north" data-country="bulgaria"/>
                        <text x="617" y="500" class="region-label">BG</text>
                    </g>

                    <!-- –ê–ª–±–∞–Ω–∏—è -->
                    <g class="country-group" data-country="albania">
                        <path id="albania_main" class="region" d="M540,530 L560,525 L565,555 L545,560 Z" data-region="albania_main" data-country="albania"/>
                        <text x="552" y="545" class="region-label">AL</text>
                    </g>

                    <!-- –ë–∞–ª—Ç–∏–π—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω—ã -->
                    <!-- –õ–∏—Ç–≤–∞ -->
                    <g class="country-group" data-country="lithuania">
                        <path id="lithuania_west" class="region" d="M560,320 L590,315 L595,350 L565,355 Z" data-region="lithuania_west" data-country="lithuania"/>
                        <text x="577" y="335" class="region-label">LT</text>
                    </g>

                    <!-- –õ–∞—Ç–≤–∏—è -->
                    <g class="country-group" data-country="latvia">
                        <path id="latvia_main" class="region" d="M580,300 L610,295 L615,330 L585,335 Z" data-region="latvia_main" data-country="latvia"/>
                        <text x="597" y="315" class="region-label">LV</text>
                    </g>

                    <!-- –≠—Å—Ç–æ–Ω–∏—è -->
                    <g class="country-group" data-country="estonia">
                        <path id="estonia_main" class="region" d="M580,270 L610,265 L615,300 L585,305 Z" data-region="estonia_main" data-country="estonia"/>
                        <text x="597" y="285" class="region-label">EE</text>
                    </g>

                    <!-- –ë–µ–Ω–∏–ª—é–∫—Å -->
                    <!-- –ù–∏–¥–µ—Ä–ª–∞–Ω–¥—ã -->
                    <g class="country-group" data-country="netherlands">
                        <path id="netherlands_main" class="region" d="M380,330 L410,325 L415,360 L385,365 Z" data-region="netherlands_main" data-country="netherlands"/>
                        <text x="397" y="345" class="region-label">NL</text>
                    </g>

                    <!-- –ë–µ–ª—å–≥–∏—è -->
                    <g class="country-group" data-country="belgium">
                        <path id="belgium_main" class="region" d="M370,360 L400,355 L405,390 L375,395 Z" data-region="belgium_main" data-country="belgium"/>
                        <text x="387" y="375" class="region-label">BE</text>
                    </g>

                    <!-- –õ—é–∫—Å–µ–º–±—É—Ä–≥ -->
                    <g class="country-group" data-country="luxembourg">
                        <path id="luxembourg_main" class="region" d="M390,370 L405,368 L408,385 L393,387 Z" data-region="luxembourg_main" data-country="luxembourg"/>
                        <text x="399" y="378" class="region-label">LU</text>
                    </g>

                    <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ï–≤—Ä–æ–ø–∞ -->
                    <!-- –ê–≤—Å—Ç—Ä–∏—è -->
                    <g class="country-group" data-country="austria">
                        <path id="austria_west" class="region" d="M480,420 L510,415 L515,450 L485,455 Z" data-region="austria_west" data-country="austria"/>
                        <text x="497" y="435" class="region-label">AT</text>
                    </g>

                    <!-- –®–≤–µ–π—Ü–∞—Ä–∏—è -->
                    <g class="country-group" data-country="switzerland">
                        <path id="switzerland_main" class="region" d="M420,420 L450,415 L455,450 L425,455 Z" data-region="switzerland_main" data-country="switzerland"/>
                        <text x="437" y="435" class="region-label">CH</text>
                    </g>

                    <!-- –ß–µ—Ö–∏—è -->
                    <g class="country-group" data-country="czechia">
                        <path id="czechia_west" class="region" d="M500,380 L530,375 L535,410 L505,415 Z" data-region="czechia_west" data-country="czechia"/>
                        <text x="517" y="395" class="region-label">CZ</text>
                    </g>

                    <!-- –°–ª–æ–≤–∞–∫–∏—è -->
                    <g class="country-group" data-country="slovakia">
                        <path id="slovakia_main" class="region" d="M540,400 L570,395 L575,430 L545,435 Z" data-region="slovakia_main" data-country="slovakia"/>
                        <text x="557" y="415" class="region-label">SK</text>
                    </g>

                    <!-- –í–µ–Ω–≥—Ä–∏—è -->
                    <g class="country-group" data-country="hungary">
                        <path id="hungary_main" class="region" d="M540,430 L570,425 L575,460 L545,465 Z" data-region="hungary_main" data-country="hungary"/>
                        <text x="557" y="445" class="region-label">HU</text>
                    </g>

                    <!-- –Æ–∂–Ω–∞—è –ï–≤—Ä–æ–ø–∞ -->
                    <!-- –ü–æ—Ä—Ç—É–≥–∞–ª–∏—è -->
                    <g class="country-group" data-country="portugal">
                        <path id="portugal_north" class="region" d="M150,470 L180,465 L185,520 L155,525 Z" data-region="portugal_north" data-country="portugal"/>
                        <text x="167" y="495" class="region-label">PT</text>
                    </g>

                    <!-- –ò—Ä–ª–∞–Ω–¥–∏—è -->
                    <g class="country-group" data-country="ireland">
                        <path id="ireland_east" class="region" d="M200,320 L230,315 L235,370 L205,375 Z" data-region="ireland_east" data-country="ireland"/>
                        <text x="217" y="345" class="region-label">IE</text>
                    </g>

                    <!-- –î—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã -->
                    <!-- –ë–µ–ª–∞—Ä—É—Å—å -->
                    <g class="country-group" data-country="belarus">
                        <path id="belarus_north" class="region" d="M600,320 L640,315 L645,370 L605,375 Z" data-region="belarus_north" data-country="belarus"/>
                        <text x="622" y="345" class="region-label">BY</text>
                    </g>

                    <!-- –ú–æ–ª–¥–æ–≤–∞ -->
                    <g class="country-group" data-country="moldova">
                        <path id="moldova_main" class="region" d="M630,420 L660,415 L665,450 L635,455 Z" data-region="moldova_main" data-country="moldova"/>
                        <text x="647" y="435" class="region-label">MD</text>
                    </g>

                    <!-- –ß–µ—Ä–Ω–æ–≥–æ—Ä–∏—è -->
                    <g class="country-group" data-country="montenegro">
                        <path id="montenegro_main" class="region" d="M550,510 L570,505 L575,535 L555,540 Z" data-region="montenegro_main" data-country="montenegro"/>
                        <text x="562" y="525" class="region-label">ME</text>
                    </g>

                    <!-- –°–µ–≤–µ—Ä–Ω–∞—è –ú–∞–∫–µ–¥–æ–Ω–∏—è -->
                    <g class="country-group" data-country="north_macedonia">
                        <path id="macedonia_main" class="region" d="M570,520 L590,515 L595,545 L575,550 Z" data-region="macedonia_main" data-country="north_macedonia"/>
                        <text x="582" y="535" class="region-label">MK</text>
                    </g>

                    <!-- –°–ª–æ–≤–µ–Ω–∏—è -->
                    <g class="country-group" data-country="slovenia">
                        <path id="slovenia_main" class="region" d="M490,450 L510,445 L515,475 L495,480 Z" data-region="slovenia_main" data-country="slovenia"/>
                        <text x="502" y="465" class="region-label">SI</text>
                    </g>

                    <!-- –ë–æ—Å–Ω–∏—è –∏ –ì–µ—Ä—Ü–µ–≥–æ–≤–∏–Ω–∞ -->
                    <g class="country-group" data-country="bosnia">
                        <path id="bosnia_main" class="region" d="M520,480 L540,475 L545,505 L525,510 Z" data-region="bosnia_main" data-country="bosnia"/>
                        <text x="532" y="495" class="region-label">BA</text>
                    </g>

                    <!-- –ò—Å–ª–∞–Ω–¥–∏—è -->
                    <g class="country-group" data-country="iceland">
                        <path id="iceland_main" class="region" d="M200,150 L250,145 L255,200 L205,205 Z" data-region="iceland_main" data-country="iceland"/>
                        <text x="227" y="175" class="region-label">IS</text>
                    </g>

                    <!-- –ú–∞–ª—å—Ç–∞ -->
                    <g class="country-group" data-country="malta">
                        <path id="malta_main" class="region" d="M520,620 L540,615 L545,635 L525,640 Z" data-region="malta_main" data-country="malta"/>
                        <text x="532" y="630" class="region-label">MT</text>
                    </g>

                    <!-- –ö–∏–ø—Ä -->
                    <g class="country-group" data-country="cyprus">
                        <path id="cyprus_main" class="region" d="M700,580 L730,575 L735,610 L705,615 Z" data-region="cyprus_main" data-country="cyprus"/>
                        <text x="717" y="595" class="region-label">CY</text>
                    </g>

                    <!-- –ê–Ω–¥–æ—Ä—Ä–∞ -->
                    <g class="country-group" data-country="andorra">
                        <path id="andorra_main" class="region" d="M320,480 L340,475 L345,500 L325,505 Z" data-region="andorra_main" data-country="andorra"/>
                        <text x="332" y="490" class="region-label">AD</text>
                    </g>

                    <!-- –ú–æ–Ω–∞–∫–æ -->
                    <g class="country-group" data-country="monaco">
                        <path id="monaco_main" class="region" d="M400,460 L420,455 L425,480 L405,485 Z" data-region="monaco_main" data-country="monaco"/>
                        <text x="412" y="470" class="region-label">MC</text>
                    </g>

                    <!-- –°–∞–Ω-–ú–∞—Ä–∏–Ω–æ -->
                    <g class="country-group" data-country="san_marino">
                        <path id="san_marino_main" class="region" d="M460,470 L480,465 L485,490 L465,495 Z" data-region="san_marino_main" data-country="san_marino"/>
                        <text x="472" y="480" class="region-label">SM</text>
                    </g>

                    <!-- –õ–∏—Ö—Ç–µ–Ω—à—Ç–µ–π–Ω -->
                    <g class="country-group" data-country="liechtenstein">
                        <path id="liechtenstein_main" class="region" d="M440,410 L460,405 L465,430 L445,435 Z" data-region="liechtenstein_main" data-country="liechtenstein"/>
                        <text x="452" y="420" class="region-label">LI</text>
                    </g>
                </svg>
            </div>

            <div class="controls">
                <div class="control-group">
                    <h2>üé® –õ–µ–≥–µ–Ω–¥–∞ –∫–∞—Ä—Ç—ã</h2>
                    <div class="legend">
                        <div class="color-box" style="background-color: #27ae60;"></div>
                        <span>–ú–∏—Ä–Ω—ã–π —Ä–µ–≥–∏–æ–Ω</span>
                    </div>
                    <div class="legend">
                        <div class="color-box" style="background-color: #e74c3c;"></div>
                        <span>–†–µ–≥–∏–æ–Ω –≤ –≤–æ–π–Ω–µ</span>
                    </div>
                    <div class="legend">
                        <div class="color-box" style="background-color: #3498db;"></div>
                        <span>–í—ã—Å–æ–∫–∏–π –¥–æ—Ö–æ–¥</span>
                    </div>
                    <div class="legend">
                        <div class="color-box" style="background-color: #f39c12;"></div>
                        <span>–°–∏–ª—å–Ω–∞—è –∞—Ä–º–∏—è</span>
                    </div>
                    <div class="legend">
                        <div class="color-box" style="background-color: #9b59b6;"></div>
                        <span>–ú–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–æ–≤</span>
                    </div>
                    <div class="legend">
                        <div class="color-box" style="background-color: #7f8c8d;"></div>
                        <span>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</span>
                    </div>
                </div>

                <div class="control-group">
                    <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã</h2>
                    <div class="status-info">
                        <div class="detail-item">
                            <span class="detail-label">–°—Ç–∞—Ç—É—Å:</span>
                            <span class="detail-value" id="sync-status">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞...</span>
                        </div>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-value" id="regions-count">85</div>
                                <div class="stat-label">–†–µ–≥–∏–æ–Ω–æ–≤</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="countries-count">30</div>
                                <div class="stat-label">–°—Ç—Ä–∞–Ω</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="wars-count">0</div>
                                <div class="stat-label">–í–æ–π–Ω</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="alliances-count">0</div>
                                <div class="stat-label">–ê–ª—å—è–Ω—Å–æ–≤</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <h2>üìç –î–µ—Ç–∞–ª–∏ —Ä–µ–≥–∏–æ–Ω–∞</h2>
                    <div class="region-details" id="region-details">
                        <div style="text-align: center; padding: 20px;">
                            <div style="font-size: 4em; margin-bottom: 15px;">üó∫Ô∏è</div>
                            <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω</h3>
                            <p>–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π —Ä–µ–≥–∏–æ–Ω –Ω–∞ –∫–∞—Ä—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDRUoIzXpwwAGYM0qciAYdQm-wtMKqLsVs",
            authDomain: "strani3.firebaseapp.com",
            databaseURL: "https://strani3-default-rtdb.europe-west1.firebasedatabase.app/",
            projectId: "strani3",
            storageBucket: "strani3.firebasestorage.app",
            messagingSenderId: "225168183800",
            appId: "1:225168183800:web:825e782a35bccca89d460d",
            measurementId: "G-3NKBET5R9J"
        };

        let db;
        let countriesData = {};
        let currentFilter = 'all';
        let selectedRegion = null;

        // –í—Å–µ —Å—Ç—Ä–∞–Ω—ã –ï–≤—Ä–æ–ø—ã
        const allCountries = [
            'albania', 'andorra', 'austria', 'belarus', 'belgium', 'bosnia', 'bulgaria',
            'croatia', 'cyprus', 'czechia', 'denmark', 'estonia', 'finland', 'france',
            'germany', 'greece', 'hungary', 'iceland', 'ireland', 'italy', 'latvia',
            'liechtenstein', 'lithuania', 'luxembourg', 'malta', 'moldova', 'monaco',
            'montenegro', 'netherlands', 'north_macedonia', 'norway', 'poland', 'portugal',
            'romania', 'san_marino', 'serbia', 'slovakia', 'slovenia', 'spain', 'sweden',
            'switzerland', 'ukraine', 'united_kingdom'
        ];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
        function initializeFirebase() {
            try {
                const app = firebase.initializeApp(firebaseConfig);
                db = firebase.database();
                console.log("‚úÖ Firebase –ø–æ–¥–∫–ª—é—á–µ–Ω");
                return true;
            } catch (error) {
                console.log("‚ùå –û—à–∏–±–∫–∞ Firebase: " + error.message);
                return false;
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω
        function loadCountriesData() {
            if (!db) return;

            // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω
            db.ref("countries").on("value", (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    countriesData = data;
                    updateMapColors();
                    updateStatistics();
                }
            });

            // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–æ–π–Ω–∞—Ö –∏ –∞–ª—å—è–Ω—Å–∞—Ö
            db.ref("wars").on("value", () => {
                updateStatistics();
                updateMapColors();
            });

            db.ref("alliances").on("value", () => {
                updateStatistics();
                updateMapColors();
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStatistics() {
            const countriesCount = Object.keys(countriesData).length;
            const warsCount = calculateWarsCount();
            const alliancesCount = calculateAlliancesCount();
            
            document.getElementById('countries-count').textContent = countriesCount;
            document.getElementById('wars-count').textContent = warsCount;
            document.getElementById('alliances-count').textContent = alliancesCount;
            document.getElementById('sync-status').textContent = '‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ';
        }

        // –ü–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–æ–π–Ω
        function calculateWarsCount() {
            let wars = 0;
            Object.values(countriesData).forEach(country => {
                if (country.wars && Object.keys(country.wars).length > 0) {
                    wars++;
                }
            });
            return wars;
        }

        // –ü–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞–ª—å—è–Ω—Å–æ–≤
        function calculateAlliancesCount() {
            let alliances = 0;
            Object.values(countriesData).forEach(country => {
                if (country.alliance) {
                    alliances++;
                }
            });
            return alliances;
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞
        function getRegionData(regionId, countryId) {
            const countryData = countriesData[countryId];
            if (!countryData) {
                return {
                    population: 0,
                    army: 0,
                    gold: 0,
                    income: 0,
                    hasWars: false,
                    inAlliance: false
                };
            }

            const basePopulation = countryData.population || 0;
            const baseArmy = countryData.army || 0;
            const baseGold = countryData.gold || 0;
            const hasWars = countryData.wars && Object.keys(countryData.wars).length > 0;
            const inAlliance = !!countryData.alliance;

            // –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
            const share = 0.5 + Math.random() * 0.5; // 0.5-1.0 –¥–æ–ª–∏

            return {
                population: Math.floor(basePopulation * share),
                army: Math.floor(baseArmy * share),
                gold: Math.floor(baseGold * share),
                income: Math.floor((basePopulation * share) / 100000),
                hasWars: hasWars,
                inAlliance: inAlliance
            };
        }

        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ —Ä–µ–≥–∏–æ–Ω–∞
        function getRegionColor(regionData) {
            if (regionData.population === 0) return '#7f8c8d';
            if (regionData.hasWars) return '#e74c3c';
            if (regionData.income > 50) return '#3498db';
            if (regionData.army > 200) return '#f39c12';
            if (regionData.gold > 1000) return '#9b59b6';
            return '#27ae60';
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ
        function updateMapColors() {
            const regions = document.querySelectorAll('.region');
            
            regions.forEach(region => {
                const regionId = region.id;
                const countryId = region.getAttribute('data-country');
                const regionData = getRegionData(regionId, countryId);
                const color = getRegionColor(regionData);
                
                let shouldShow = true;
                if (currentFilter === 'wars' && !regionData.hasWars) {
                    shouldShow = false;
                } else if (currentFilter === 'rich' && regionData.income <= 30) {
                    shouldShow = false;
                }

                region.style.opacity = shouldShow ? '1' : '0.3';
                region.style.fill = color;
                region.classList.add('updating');
                
                setTimeout(() => {
                    region.classList.remove('updating');
                }, 300);
            });
        }

        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞
        function setFilter(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            updateMapColors();
        }

        // –ü–æ–∫–∞–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–µ–≥–∏–æ–Ω–µ
        function showRegionInfo(regionId, countryId) {
            const regionData = getRegionData(regionId, countryId);
            const detailsElement = document.getElementById('region-details');
            
            const countryNames = {
                'albania': '–ê–ª–±–∞–Ω–∏—è', 'andorra': '–ê–Ω–¥–æ—Ä—Ä–∞', 'austria': '–ê–≤—Å—Ç—Ä–∏—è',
                'belarus': '–ë–µ–ª–∞—Ä—É—Å—å', 'belgium': '–ë–µ–ª—å–≥–∏—è', 'bosnia': '–ë–æ—Å–Ω–∏—è –∏ –ì–µ—Ä—Ü–µ–≥–æ–≤–∏–Ω–∞',
                'bulgaria': '–ë–æ–ª–≥–∞—Ä–∏—è', 'croatia': '–•–æ—Ä–≤–∞—Ç–∏—è', 'cyprus': '–ö–∏–ø—Ä',
                'czechia': '–ß–µ—Ö–∏—è', 'denmark': '–î–∞–Ω–∏—è', 'estonia': '–≠—Å—Ç–æ–Ω–∏—è',
                'finland': '–§–∏–Ω–ª—è–Ω–¥–∏—è', 'france': '–§—Ä–∞–Ω—Ü–∏—è', 'germany': '–ì–µ—Ä–º–∞–Ω–∏—è',
                'greece': '–ì—Ä–µ—Ü–∏—è', 'hungary': '–í–µ–Ω–≥—Ä–∏—è', 'iceland': '–ò—Å–ª–∞–Ω–¥–∏—è',
                'ireland': '–ò—Ä–ª–∞–Ω–¥–∏—è', 'italy': '–ò—Ç–∞–ª–∏—è', 'latvia': '–õ–∞—Ç–≤–∏—è',
                'liechtenstein': '–õ–∏—Ö—Ç–µ–Ω—à—Ç–µ–π–Ω', 'lithuania': '–õ–∏—Ç–≤–∞', 'luxembourg': '–õ—é–∫—Å–µ–º–±—É—Ä–≥',
                'malta': '–ú–∞–ª—å—Ç–∞', 'moldova': '–ú–æ–ª–¥–æ–≤–∞', 'monaco': '–ú–æ–Ω–∞–∫–æ',
                'montenegro': '–ß–µ—Ä–Ω–æ–≥–æ—Ä–∏—è', 'netherlands': '–ù–∏–¥–µ—Ä–ª–∞–Ω–¥—ã', 'north_macedonia': '–°–µ–≤–µ—Ä–Ω–∞—è –ú–∞–∫–µ–¥–æ–Ω–∏—è',
                'norway': '–ù–æ—Ä–≤–µ–≥–∏—è', 'poland': '–ü–æ–ª—å—à–∞', 'portugal': '–ü–æ—Ä—Ç—É–≥–∞–ª–∏—è',
                'romania': '–†—É–º—ã–Ω–∏—è', 'san_marino': '–°–∞–Ω-–ú–∞—Ä–∏–Ω–æ', 'serbia': '–°–µ—Ä–±–∏—è',
                'slovakia': '–°–ª–æ–≤–∞–∫–∏—è', 'slovenia': '–°–ª–æ–≤–µ–Ω–∏—è', 'spain': '–ò—Å–ø–∞–Ω–∏—è',
                'sweden': '–®–≤–µ—Ü–∏—è', 'switzerland': '–®–≤–µ–π—Ü–∞—Ä–∏—è', 'ukraine': '–£–∫—Ä–∞–∏–Ω–∞',
                'united_kingdom': '–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è'
            };

            detailsElement.innerHTML = `
                <h3>${countryNames[countryId] || countryId}</h3>
                <div class="detail-item">
                    <span class="detail-label">üë• –ù–∞—Å–µ–ª–µ–Ω–∏–µ:</span>
                    <span class="detail-value">${regionData.population.toLocaleString()}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">üí∞ –î–æ—Ö–æ–¥/—á–∞—Å:</span>
                    <span class="detail-value">${regionData.income} –∑–æ–ª–æ—Ç–∞</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">‚öîÔ∏è –ê—Ä–º–∏—è:</span>
                    <span class="detail-value">${regionData.army} —Å–æ–ª–¥–∞—Ç</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">üè¶ –ó–æ–ª–æ—Ç–æ:</span>
                    <span class="detail-value">${regionData.gold}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">üïäÔ∏è –°—Ç–∞—Ç—É—Å:</span>
                    <span class="detail-value">${regionData.hasWars ? '‚öîÔ∏è –í–æ–π–Ω–∞' : 'üïäÔ∏è –ú–∏—Ä'}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">ü§ù –ê–ª—å—è–Ω—Å:</span>
                    <span class="detail-value">${regionData.inAlliance ? '‚úÖ –í –∞–ª—å—è–Ω—Å–µ' : '‚ùå –ù–µ –≤ –∞–ª—å—è–Ω—Å–µ'}</span>
                </div>
            `;

            if (selectedRegion) {
                selectedRegion.style.strokeWidth = '2';
                selectedRegion.style.stroke = 'rgba(255,255,255,0.9)';
            }
            
            selectedRegion = document.getElementById(regionId);
            if (selectedRegion) {
                selectedRegion.style.strokeWidth = '4';
                selectedRegion.style.stroke = '#f39c12';
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã
        function initializeMap() {
            const regions = document.querySelectorAll('.region');
            
            regions.forEach(region => {
                region.addEventListener('click', (e) => {
                    const regionId = e.target.id;
                    const countryId = e.target.getAttribute('data-country');
                    showRegionInfo(regionId, countryId);
                });

                region.addEventListener('mouseenter', (e) => {
                    if (e.target !== selectedRegion) {
                        e.target.style.strokeWidth = '3';
                        e.target.style.stroke = '#3498db';
                    }
                });

                region.addEventListener('mouseleave', (e) => {
                    if (e.target !== selectedRegion) {
                        e.target.style.strokeWidth = '2';
                        e.target.style.stroke = 'rgba(255,255,255,0.9)';
                    }
                });
            });
        }

        // –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function initialize() {
            if (initializeFirebase()) {
                loadCountriesData();
                initializeMap();
                setInterval(() => {
                    updateMapColors();
                    updateStatistics();
                }, 10000);
            }
        }

        document.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>
                        </html>
